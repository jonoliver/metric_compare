#!/usr/bin/env ruby
# require 'metric_compare'
require_relative '../lib/metric_compare.rb'


def process_args
  require 'optparse'

  options = {
    type: :file
  }
  OptionParser.new do |opts|
    opts.banner = "Usage: metric_compare [options]"

    opts.on("-f", "--[no-]file", "Specify files for diff") do |v|
    end
    opts.on("-g", "--[no-]git", "Specify git hashes for diff") do |v|
      options[:type] = :git
    end

  end.parse!

  options
end




options = process_args
args = ARGV
abort '-h or --help for usage' if args.size == 0



p options
p args

case options[:type]
when :file
when :git
end



abort "Specify two .yml files to compare" unless args.count == 2
MetricCompare.configuration.output_dir='tmp/metric_fu/'
MetricCompare::Init(options, args)

abort 'done'



# MetricCompare::Init(ARGV[0], ARGV[1])


# `git branch -D tmp_metric_compare`
# `git checkout -b tmp_metric_compare`
# `git branch -D tmp_metric_compare`
# branch = `git rev-parse --abbrev-ref HEAD`
#
# `git checkout #{ARGV[0]}`
# puts `git rev-parse --abbrev-ref HEAD`
# `git checkout #{branch}`
